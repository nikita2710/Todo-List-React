{"ast":null,"code":"var _jsxFileName = \"/Users/nikitasharma/Desktop/todo-list/src/components/todo-list/todo.js\";\nimport React, { Component } from 'react';\nimport Table from 'react-bootstrap/Table';\nimport Button from 'react-bootstrap/Button';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Form from 'react-bootstrap/Form';\nimport InputGroup from 'react-bootstrap/InputGroup';\nimport Modal from 'react-bootstrap/Modal';\nimport './todo.scss';\n\nclass ToDo extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      title: \"\",\n      description: \"\",\n      status: \"\",\n      show: false,\n      tasks: [],\n      tok: \"\"\n    };\n\n    this.refreshTasks = () => {\n      const url = 'https://engine-staging.viame.ae/assessment/user/list';\n      fetch(url, {\n        method: 'GET',\n        headers: {\n          'x-access-token': this.state.tok\n        }\n      }).then(res => res.json()).catch(error => console.error('Error:', error)).then(response => {\n        console.log('Success:', response);\n        this.setState({\n          tasks: response\n        });\n      });\n    };\n\n    this.componentDidMount = () => {\n      this.setState({\n        tok: localStorage.getItem(\"token\")\n      });\n      this.refreshTasks();\n    };\n\n    this.handleClose = () => this.setState({\n      show: false\n    });\n\n    this.handleShow = () => this.setState({\n      show: true\n    });\n\n    this.handleModalChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.addNewTask = () => {\n      const url = 'https://engine-staging.viame.ae/assessment/user/task';\n      const data = {\n        todolist: {\n          title: this.state.title,\n          description: this.state.description,\n          status: 1\n        }\n      };\n      fetch(url, {\n        method: 'POST',\n        body: JSON.stringify(data),\n        headers: {\n          'Content-Type': 'application/json',\n          'x-access-token': this.state.tok\n        }\n      }).then(res => res.json()).catch(error => console.error('Error:', error)).then(response => {\n        console.log('Success:', response);\n        this.handleClose();\n        this.refreshTasks();\n      });\n    };\n\n    this.deleteTask = id => {\n      const url = 'https://engine-staging.viame.ae/assessment/user/task/' + id;\n      const tok = localStorage.getItem(\"token\");\n      fetch(url, {\n        method: 'DELETE',\n        headers: {\n          'x-access-token': tok\n        }\n      }).then(res => res.json()).catch(error => console.error('Error:', error)).then(response => {\n        console.log('Success:', response);\n        this.refreshTasks();\n      });\n    };\n\n    this.updateTask = (task, status) => {\n      const url = 'https://engine-staging.viame.ae/assessment/user/task/' + task._id;\n      const data = {\n        todolist: {\n          title: task.title,\n          description: task.description,\n          status: status\n        }\n      };\n      fetch(url, {\n        method: 'PUT',\n        body: JSON.stringify(data),\n        headers: {\n          'Content-Type': 'application/json',\n          'x-access-token': 'ca7fe1db6188a235dabc9c1457d82e636b11a543'\n        }\n      }).then(res => res.json()).catch(error => console.error('Error:', error)).then(response => {\n        console.log('Success:', response);\n        this.refreshTasks();\n      });\n    };\n\n    this.logOut = () => {\n      localStorage.removeItem(\"token\");\n      this.props.userLoggedOut();\n    };\n  }\n\n  renderStatus(param) {\n    switch (param) {\n      case 1:\n        return \"Created\";\n\n      case 2:\n        return \"Working\";\n\n      case 3:\n        return \"Finished\";\n\n      case 4:\n        return \"Cancelled\";\n\n      default:\n        return \"Created\";\n    }\n  }\n\n  render() {\n    let tasks = this.state.tasks;\n    let show = this.state.show;\n    return React.createElement(Container, {\n      className: \"todoList\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(Col, {\n      className: \"alignBtn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(Button, {\n      id: \"logOut\",\n      variant: \"secondary\",\n      type: \"button\",\n      onClick: this.logOut,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"Logout\"), React.createElement(Button, {\n      id: \"newTask\",\n      variant: \"primary\",\n      onClick: this.handleShow,\n      type: \"button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \" + New Task\"))), React.createElement(Row, {\n      className: \"todoBox\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(Table, {\n      responsive: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Task\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Description\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"Status\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"Action\"))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, tasks.map(task => React.createElement(\"tr\", {\n      key: task._id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, task.title), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, task.description), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, this.renderStatus(task.status)), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(Dropdown, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(Dropdown.Toggle, {\n      variant: \"success\",\n      id: \"dropdown-basic\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, \"Actions \"), React.createElement(Dropdown.Menu, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(Dropdown.Item, {\n      onClick: () => {\n        this.updateTask(task, 3);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"Finished\"), React.createElement(Dropdown.Item, {\n      onClick: () => {\n        this.updateTask(task, 2);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"Working\"), React.createElement(Dropdown.Item, {\n      onClick: () => {\n        this.updateTask(task, 4);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, \"Cancel Task\"), React.createElement(Dropdown.Item, {\n      onClick: () => {\n        this.deleteTask(task._id);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"Delete\"))))))))), React.createElement(Modal, {\n      show: show,\n      onHide: this.handleClose,\n      className: \"newModal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(Modal.Header, {\n      closeButton: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, React.createElement(Modal.Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, \"Add New Task\")), React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(Form, {\n      className: \"text-center newTaskForm\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      controlId: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(InputGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(Form.Control, {\n      type: \"text\",\n      name: \"title\",\n      placeholder: \"Enter task title\",\n      onChange: this.handleModalChange,\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }), React.createElement(Form.Control.Feedback, {\n      type: \"invalid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, \"Please enter title for the task\"))), React.createElement(Form.Group, {\n      controlId: \"description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, React.createElement(InputGroup, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, React.createElement(Form.Control, {\n      as: \"textarea\",\n      type: \"text\",\n      name: \"description\",\n      placeholder: \"Enter task description\",\n      onChange: this.handleModalChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }), React.createElement(Form.Control.Feedback, {\n      type: \"invalid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, \"Please enter a valid description for the task\"))))), React.createElement(Modal.Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(Button, {\n      variant: \"secondary\",\n      onClick: this.handleClose,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"Close\"), React.createElement(Button, {\n      variant: \"primary\",\n      onClick: this.addNewTask,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"Add Task\"))));\n  }\n\n}\n\nexport default ToDo;","map":{"version":3,"sources":["/Users/nikitasharma/Desktop/todo-list/src/components/todo-list/todo.js"],"names":["React","Component","Table","Button","Dropdown","Container","Row","Col","Form","InputGroup","Modal","ToDo","state","title","description","status","show","tasks","tok","refreshTasks","url","fetch","method","headers","then","res","json","catch","error","console","response","log","setState","componentDidMount","localStorage","getItem","handleClose","handleShow","handleModalChange","event","target","name","value","addNewTask","data","todolist","body","JSON","stringify","deleteTask","id","updateTask","task","_id","logOut","removeItem","props","userLoggedOut","renderStatus","param","render","map"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport Table from 'react-bootstrap/Table'\nimport Button from 'react-bootstrap/Button';\nimport Dropdown from 'react-bootstrap/Dropdown';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Form from 'react-bootstrap/Form';\nimport InputGroup from 'react-bootstrap/InputGroup';\nimport Modal from 'react-bootstrap/Modal';\nimport './todo.scss';\n\nclass ToDo extends Component {\n    state = {\n        title: \"\",\n        description: \"\",\n        status: \"\",\n        show : false,\n        tasks: [],\n        tok: \"\"\n    }\n\n    refreshTasks = () => {\n        const url = 'https://engine-staging.viame.ae/assessment/user/list';\n        fetch(url, { \n            method: 'GET',\n            headers:{ 'x-access-token': this.state.tok } \n        }).then(res => res.json()\n        ).catch(error => console.error('Error:', error)\n        ).then(response => {\n            console.log('Success:', response);\n            this.setState({tasks: response});\n        });\n    }\n\n    componentDidMount = () => {\n        this.setState({tok: localStorage.getItem(\"token\")});\n        this.refreshTasks();\n    }\n\n    renderStatus(param) {\n        switch(param) {\n          case 1:\n            return \"Created\";\n          case 2:\n            return \"Working\";\n          case 3:\n            return \"Finished\";\n          case 4:\n            return \"Cancelled\";\n          default:\n            return \"Created\";\n        }\n    }\n\n    handleClose = () => this.setState({show: false});\n    handleShow = () => this.setState({show: true});\n    handleModalChange = event => {this.setState({ [event.target.name]:event.target.value })}\n\n    addNewTask = () => {\n        const url = 'https://engine-staging.viame.ae/assessment/user/task';\n        const data = {todolist: { title: this.state.title, description: this.state.description, status:1 }}\n        fetch(url, { \n            method: 'POST',\n            body: JSON.stringify(data),\n            headers:{ 'Content-Type': 'application/json', 'x-access-token': this.state.tok } \n        }).then(res => res.json()\n        ).catch(error => console.error('Error:', error)\n        ).then(response => {\n            console.log('Success:', response);\n            this.handleClose();\n            this.refreshTasks();\n        });\n    }\n\n    deleteTask = (id) => {\n        const url = 'https://engine-staging.viame.ae/assessment/user/task/'+ id;\n        const tok = localStorage.getItem(\"token\");\n        fetch(url, { \n            method: 'DELETE',\n            headers:{'x-access-token': tok}\n        }).then(res => res.json()\n        ).catch(error => console.error('Error:', error)\n        ).then(response => {\n            console.log('Success:', response);\n            this.refreshTasks();\n        });\n    }\n\n    updateTask = (task, status) => {\n        const url = 'https://engine-staging.viame.ae/assessment/user/task/'+ task._id;\n        const data = {todolist: { title: task.title, description: task.description, status:status }}\n        fetch(url, { \n            method: 'PUT',\n            body: JSON.stringify(data),\n            headers:{ 'Content-Type': 'application/json', 'x-access-token': 'ca7fe1db6188a235dabc9c1457d82e636b11a543' } \n        }).then(res => res.json()\n        ).catch(error => console.error('Error:', error)\n        ).then(response => {\n            console.log('Success:', response);\n            this.refreshTasks();\n        });\n    }\n\n    logOut = () => {\n        localStorage.removeItem(\"token\");\n        this.props.userLoggedOut();\n    }\n\n    render() {\n        let tasks = this.state.tasks;\n        let show = this.state.show;\n        return (\n            <Container className=\"todoList\">\n                <Row>\n                    <Col className=\"alignBtn\">\n                        <Button id=\"logOut\" variant=\"secondary\" type=\"button\" onClick={this.logOut}>Logout</Button>\n                        <Button id=\"newTask\" variant=\"primary\" onClick={this.handleShow} type=\"button\"> + New Task</Button>  \n                    </Col>\n                </Row>\n                <Row className=\"todoBox\">\n                    <Table responsive>\n                        <thead>\n                            <tr>\n                                <th>Task</th>\n                                <th>Description</th>\n                                <th>Status</th>\n                                <th>Action</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {tasks.map(task => (\n                                <tr key={task._id}>\n                                    <td>{task.title}</td>\n                                    <td>{task.description}</td>\n                                    <td>{this.renderStatus(task.status)}</td>\n                                    <td>\n                                        <Dropdown>\n                                            <Dropdown.Toggle variant=\"success\" id=\"dropdown-basic\">Actions </Dropdown.Toggle>\n                                            <Dropdown.Menu>\n                                                <Dropdown.Item onClick={ () => {this.updateTask(task, 3)} }>Finished</Dropdown.Item>\n                                                <Dropdown.Item onClick={ () => {this.updateTask(task, 2)} }>Working</Dropdown.Item>\n                                                <Dropdown.Item onClick={ () => {this.updateTask(task, 4)} }>Cancel Task</Dropdown.Item>\n                                                <Dropdown.Item onClick={ () => {this.deleteTask(task._id)} }>Delete</Dropdown.Item>\n                                            </Dropdown.Menu>\n                                        </Dropdown>\n                                    </td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </Table>\n                </Row>\n                <Modal show={show} onHide={this.handleClose} className=\"newModal\">\n                    <Modal.Header closeButton>\n                        <Modal.Title>Add New Task</Modal.Title>\n                    </Modal.Header>\n                    <Modal.Body>\n                        <Form className=\"text-center newTaskForm\">\n                            <Form.Group controlId=\"title\">\n                                <InputGroup>\n                                    <Form.Control type=\"text\" name=\"title\" placeholder=\"Enter task title\" onChange={this.handleModalChange} required />\n                                    <Form.Control.Feedback type=\"invalid\">Please enter title for the task</Form.Control.Feedback>\n                                </InputGroup>\n                            </Form.Group>\n                            <Form.Group controlId=\"description\">\n                                <InputGroup>\n                                    <Form.Control as=\"textarea\" type=\"text\" name=\"description\" placeholder=\"Enter task description\" onChange={this.handleModalChange} />\n                                    <Form.Control.Feedback type=\"invalid\">Please enter a valid description for the task</Form.Control.Feedback>\n                                </InputGroup>\n                            </Form.Group>\n                        </Form>\n                    </Modal.Body>\n                    <Modal.Footer>\n                        <Button variant=\"secondary\" onClick={this.handleClose}>Close</Button>\n                        <Button variant=\"primary\" onClick={this.addNewTask}>Add Task</Button>\n                    </Modal.Footer>\n                </Modal>\n            </Container>\n        )\n    }\n}\n\nexport default ToDo;"]},"metadata":{},"sourceType":"module"}